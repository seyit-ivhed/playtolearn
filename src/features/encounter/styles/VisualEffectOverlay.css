/* Full Screen Overlay Container */
.vfx-overlay-container {
    position: fixed;
    inset: 0;
    z-index: 9999;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    backdrop-filter: blur(2px) contrast(1.2);
    /* Slight blur/contrast boost for focus */
    animation: fade-backdrop 0.2s ease-out forwards;
}

@keyframes fade-backdrop {
    0% {
        backdrop-filter: blur(0) contrast(1);
        background-color: rgba(0, 0, 0, 0);
    }

    100% {
        backdrop-filter: blur(2px) contrast(1.2);
        background-color: rgba(0, 0, 0, 0.3);
    }
}

/* --- Village Squire: DIVINE PROTECTION --- */
.vfx-shield-container {
    position: absolute;
    width: 100vw;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Main expanding shield */
.vfx-shield-circle {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    /* Double border effect */
    border: 8px solid #fef3c7;
    /* Light Amber */
    outline: 15px solid rgba(245, 158, 11, 0.5);
    /* Amber-500 semi-transparent */
    background: radial-gradient(circle, rgba(255, 251, 235, 0.9) 0%, rgba(251, 191, 36, 0.6) 60%, transparent 100%);
    box-shadow:
        0 0 80px #f59e0b,
        0 0 150px #b45309,
        inset 0 0 50px #fff;
    opacity: 0;
    transform: scale(0.1);
    animation: shield-god-expand 1.2s cubic-bezier(0.1, 0.9, 0.2, 1) forwards;
}

/* Secondary ripple */
.vfx-shield-circle::after {
    content: '';
    position: absolute;
    inset: -20px;
    border-radius: 50%;
    border: 4px solid #fff;
    opacity: 0.6;
    transform: scale(0.8);
    animation: shield-ripple 1s ease-out 0.2s infinite;
}

.vfx-shield-pulse {
    position: absolute;
    inset: 0;
    background: radial-gradient(circle, rgba(251, 191, 36, 0.4) 0%, transparent 70%);
    animation: flash-gold 0.5s ease-out forwards;
}

@keyframes shield-god-expand {
    0% {
        opacity: 0;
        transform: scale(0);
    }

    5% {
        opacity: 1;
        transform: scale(0.5);
        filter: brightness(2);
    }

    /* Flash start */
    40% {
        transform: scale(1.2);
        opacity: 1;
        filter: brightness(1.2);
    }

    /* Overshoot */
    60% {
        transform: scale(1.1);
    }

    /* Settle */
    100% {
        transform: scale(4);
        opacity: 0;
        filter: blur(10px);
    }

    /* Explode out */
}

@keyframes shield-ripple {
    0% {
        transform: scale(0.8);
        opacity: 0.8;
        border-width: 4px;
    }

    100% {
        transform: scale(2);
        opacity: 0;
        border-width: 0px;
    }
}

@keyframes flash-gold {
    0% {
        opacity: 0;
    }

    10% {
        opacity: 0.8;
        background-color: #fff;
    }

    /* White hot flash */
    100% {
        opacity: 0;
    }
}


/* --- Novice Archer: PIERCING SNIPE --- */
.vfx-arrow-container {
    position: absolute;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}

/* The Arrow Projectile */
.vfx-arrow-streak {
    position: absolute;
    top: 50%;
    left: -20%;
    width: 300%;
    /* Massive length for speed sensation */
    height: 12px;
    /* Core is white, edges are blue/cyan */
    background: linear-gradient(90deg, transparent 0%, #0ea5e9 20%, #e0f2fe 50%, #fff 80%, transparent 100%);
    box-shadow:
        0 0 30px #0ea5e9,
        0 0 60px #38bdf8,
        0 0 100px #fff;
    transform: translateY(-50%) rotate(-2deg);
    /* Dynamic angle */
    animation: arrow-snipe 0.5s cubic-bezier(0.8, 0, 1, 1) forwards;
    /* Accelerate dramatically */
    filter: blur(1px);
}

/* Screen Impact Flash */
.vfx-impact-flash {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(186, 230, 253, 0.5));
    mix-blend-mode: overlay;
    opacity: 0;
    animation: impact-shake-flash 0.6s cubic-bezier(0.22, 1, 0.36, 1) 0.3s forwards;
    /* Trigger on "hit" */
}

@keyframes arrow-snipe {
    0% {
        left: -100%;
        opacity: 0;
        width: 50%;
    }

    20% {
        opacity: 1;
        width: 100%;
    }

    100% {
        left: 200%;
        opacity: 0;
        width: 300%;
    }
}

@keyframes impact-shake-flash {
    0% {
        opacity: 0;
        transform: translate(0, 0);
    }

    10% {
        opacity: 1;
        transform: translate(-20px, 10px) skewX(-5deg);
        filter: brightness(2);
    }

    /* Hard Hit */
    20% {
        transform: translate(15px, -10px) skewX(5deg);
    }

    30% {
        transform: translate(-10px, 5px);
    }

    40% {
        transform: translate(5px, -5px);
    }

    100% {
        opacity: 0;
        transform: translate(0, 0);
    }
}